digraph {
	rankdir=TB
	graph [splines=ortho, nodesep=2]
	node [shape=record]

	comm_ctl [label="Control"]
	comm_telem [label="Telemetry\n(wifi)"]
	mcu [label="Main Controller"]
	gun [label="Gun Trigger"]
	servos [label="Servos\n(x14)"]
	imu [label="IMU"]
	v_sens [label="Battery Voltage"]
	controller [label="Controller"]

	subgraph cluster_0 {
		label = "Onboard Robot";

		comm_ctl -> mcu [xlabel="uart"]
		comm_telem -> mcu [dir=back]
		mcu -> servos [xlabel="half uart"]
		mcu -> gun [xlabel="gpio"]
		v_sens -> mcu [xlabel="adc"]
		imu -> mcu [xlabel="i2c"]

		{ rank=same; servos; gun; }

		vid_tx -> camera [dir=back]
	}
	subgraph cluster_1 {
		label = "Base Station";
		vid_rx -> laptop [xlabel="usb"]
		joystick -> laptop [xlabel="usb"]
		laptop -> controller [xlabel="usb (uart)"]

	}

	controller -> comm_ctl [style="dashed", xlabel="xbee"]
	laptop -> comm_telem [dir=back, style="dashed", xlabel="wifi"]
	vid_rx -> vid_tx [dir=back, style="dashed", xlabel="analog\n5.8ghz"]


}
